{% extends 'base.html' %}

{% block content %}
<h1>Animals and Plants in {{session["location"]|title}}</h1>
<!-- filter -->
<form action="/filter">

    <div class="input-group mb-3">
        <div class="input-group-prepend">
            <label class="input-group-text" for="filter">Filter Results</label>
        </div>
        <select name="filterresults" class="custom-select" id="filter" onchange="this.form.submit();">
            <option value="">Filter</option>
            <option value="animals">Animals</option>
            <option value="plants">Plants</option>
            <option value="insects">Insects</option>
            <option value="reptiles">Reptiles</option>
            <option value="amphibians">Amphibians</option>
            <option value="birds">Birds</option>
            <option value="fish">Fish</option>
            <option value="mammals">Mammals</option>
        </select>
        <!-- <button type="submit" class="btn btn-primary my-1">filter</button> -->
    </div>


</form>

{%if request.args.get('filterresults')%}
<h2 class="text-info">Fitered by {{request.args.get("filterresults")|title}}</h2>
{%endif%}
<!-- results from search -->
<div class="row m-3 d-flex justify-content-evenly">
    {%for item in results %}
    <div class="col">
        <div class="card" style="width: 18rem;">
            <div class="card-inner">
                <div class="image-wrapper">
                    <img loading="lazy" src="{{ item['taxon']['default_photo']['medium_url']}}" alt="" class="card-hero"
                        style="width: 18rem;">
                </div>
                <div class="card-contents">
                    <a href="details/{{item['taxon']['id']}}" class="stretched-link">
                    </a>

                </div>
                <!-- <p class="card-bio"> {{item['taxon']['preferred_common_name']|title}}</p> -->
                {%if not(item['taxon']['preferred_common_name'])%}
                <p class="card-bio"><i>{{item['taxon']['name']}}</i></p>
                {%elif item['taxon']['preferred_common_name']%}
                <p class="card-bio">{{item['taxon']['preferred_common_name']|title}}</p>
                {%else%}
                <p class="card-bio">No common or scientific name listed</p>
                {%endif%}
            </div>
        </div>
    </div>

    {%endfor%}
</div>
<form action="/results/2">
    <a href="/results/2">Next Page</a>
</form>
{%endblock%}